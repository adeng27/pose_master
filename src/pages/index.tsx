import Head from "next/head";
import { useEffect, useRef } from "react";
import { Poses } from "~/components/poses";

//Check if arms are horizontal at shoulder level
// const tArms = (pts: number[]) => {
//   if (!(pts[0] && pts[1] && pts[2] && pts[3] && pts[4] && pts[5])) throw new Error("Invalid inputs");
//   //check shoulders
//   if (Math.abs(pts[0] - pts[1]) <= error) {
//     //check elbows to shoulders
//     if (Math.abs(pts[0] - pts[2]) <= error && Math.abs(pts[1] - pts[3]) <= error) {
//       //check wrists to shoulders
//       if (Math.abs(pts[0] - pts[4]) <= error && Math.abs(pts[1] - pts[5]) <= error) return true
//     }
//   }
//   return false;
// }


export default function Home() {
  const videoRef = useRef<HTMLVideoElement>(null);

  useEffect(() => {
    getVideo();
  }, [videoRef]);

  const getVideo = () => {
    navigator.mediaDevices
      .getUserMedia({ video: { width: 378, height: 504} })
      .then(stream => {
        console.log(videoRef)
        const video = videoRef.current;
        if (!video) return;
        video.srcObject = stream;
        video.play();
      })
      .catch(err => {
        console.error("error:", err);
      });
  };
  return (
    <>
      <Head>
        <title>Pose Master</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="flex min-h-screen flex-col items-center justify-center bg-gradient-to-b from-[#2e026d] to-[#15162c]">
        <div className="container flex flex-col items-center justify-center gap-12 px-4 py-16 ">
          <Poses />
          <div>
            <video ref={videoRef} />
          </div>
        </div>
      </main>
    </>
  );
}
